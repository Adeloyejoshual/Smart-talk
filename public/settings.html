<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SmartTalk - Settings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-gray-200 min-h-screen flex flex-col">

  <!-- Header -->
  <div class="bg-[#5C2C24] px-4 py-3 flex justify-between items-center shadow">
    <h1 class="text-lg font-bold text-orange-400">Settings</h1>
    <button onclick="goBack()" class="text-sm text-gray-100 hover:text-orange-400">Back</button>
  </div>

  <!-- Profile Section -->
  <div class="flex flex-col items-center text-center mt-6 px-4">
    <div class="relative">
      <img id="avatarPreview" src="/default-avatar.png" alt="Avatar" class="w-24 h-24 rounded-full border border-gray-500 object-cover" />
      <input type="file" id="avatarInput" class="absolute top-0 left-0 w-24 h-24 opacity-0 cursor-pointer" onchange="previewAvatar()" />
    </div>
    <h2 id="usernameDisplay" class="text-lg font-bold mt-3">Username</h2>
  </div>

  <!-- Options -->
  <div class="mt-8 px-6 flex flex-col gap-4 text-sm">
    <button class="bg-[#2c2c2c] hover:bg-[#3a3a3a] py-3 px-4 rounded-lg text-left">ðŸ“¨ Invite Friends</button>
    <button class="bg-[#2c2c2c] hover:bg-[#3a3a3a] py-3 px-4 rounded-lg text-left">ðŸ“ž Contact</button>
    <button onclick="logout()" class="bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-lg text-left">ðŸšª Logout</button>
  </div>

  <script>
    const user = JSON.parse(localStorage.getItem("user"));
    const token = localStorage.getItem("token");

    if (!user || !token) {
      window.location.href = "/login.html";
    }

    // Show username and avatar
    document.getElementById("usernameDisplay").innerText = user.username || "Username";
    document.getElementById("avatarPreview").src = user.avatar || "/default-avatar.png";

    function previewAvatar() {
      const file = document.getElementById("avatarInput").files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => {
          document.getElementById("avatarPreview").src = reader.result;
        };
        reader.readAsDataURL(file);
      }
    }

    function logout() {
      localStorage.removeItem("token");
      localStorage.removeItem("user");
      window.location.href = "/login.html";
    }

    function goBack() {
      window.location.href = "/home.html";
    }
  </script>
</body>
</html>